webpackJsonp([17],{989:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return s.a.createElement("div",{className:"nav clean"},s.a.createElement("span",{className:0==e.navIndex?"active":"",onClick:e.navChange.bind(this,0)},"\u5b89\u88c5\u8bb0\u5f55"),s.a.createElement("span",{className:1==e.navIndex?"active":"",onClick:e.navChange.bind(this,1)},"\u7ef4\u4fee\u8bb0\u5f55"))}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),s=a.n(o),u=(a(348),a(347)),d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),m=u.e.Item,p=(u.g.Search,function(e){function t(e){i(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleSearch=function(){a.props.form.validateFields(function(e,t){for(var n=Object.keys(t),i={},r=0;r<n.length;r++)"chargeTime"==n[r]?(t[n[r]]&&(i.chargeTimeStart=new Date(t[n[r]][0]._d).getTime()),t[n[r]]&&(i.chargeTimeEnd=new Date(t[n[r]][1]._d).getTime())):"deadlineDate"==n[r]?(t[n[r]]&&(i.deadlineDateStart=new Date(t[n[r]][0]._d).getTime()),t[n[r]]&&(i.deadlineDateEnd=new Date(t[n[r]][1]._d).getTime())):t[n[r]]&&(i[n[r]]=t[n[r]]);i&&a.props.getSearch(i)})},a.clear=function(){a.props.form.resetFields(),a.props.init({})},a}return c(t,e),d(t,[{key:"render",value:function(){var e=this.props.form,t=e.getFieldDecorator;e.resetFields;return s.a.createElement(u.e,{className:"topForm clean"},s.a.createElement("div",{className:"fl"},s.a.createElement(m,{label:"\u8f66\u724c\u53f7\u7801\uff1a",className:"formItem"},t("vehicleId")(s.a.createElement(u.g,null)))),s.a.createElement("div",{className:"fl"},s.a.createElement(m,{label:"\u5de5\u4f5c\u4eba\u5458\uff1a",className:"formItem"},t("name")(s.a.createElement(u.g,null)))),s.a.createElement("div",{className:"fl"},s.a.createElement("a",{className:"empty",onClick:this.clear},"\u6e05\u7a7a")),s.a.createElement("div",{className:"fr"},s.a.createElement(u.b,{type:"primary",onClick:this.handleSearch},"\u67e5\u627e")))}}]),t}(o.Component)),h=u.e.create({mapPropsToFields:function(e){return{init:u.e.createFormField({value:e.init}),getSearch:u.e.createFormField({value:e.getSearch})}}})(p),g=function(e){function t(e){i(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={currPage:1,pageSize:4,total:a.props.detail.length,loading:!0},a}return c(t,e),d(t,[{key:"componentDidMount",value:function(){this.setState({loading:!1})}},{key:"next",value:function(e){if(e){if(totalPage=parseInt(this.state.total/this.state.pageSize),this.currPage+1>totalPage)return;this.setState({currPage:this.state.currPage+1})}else{if(this.currPage-1<1)return;this.setState({currPage:this.state.currPage-1})}}},{key:"render",value:function(){var e=this.props.detail.slice((this.state.currPage-1)*this.pageSize,this.state.currPage*this.pageSize);return e=this.props.detail.map(function(e,t){if(e)return s.a.createElement("div",{className:"item fl",key:t},s.a.createElement("p",null,e.pictureType),s.a.createElement("img",{src:e.picturePath}),s.a.createElement("p",null,e.pictureTime),s.a.createElement("p",null,e.pictureLocation))}),s.a.createElement("div",{className:"picDialog"},s.a.createElement("div",{className:"mask"}),s.a.createElement("div",{className:"insetbox"},s.a.createElement(u.l,{spinning:this.state.loading,tip:"Loading..."}),s.a.createElement("div",{className:"main"},s.a.createElement(u.f,{type:"close",style:{fontSize:18,color:"#08c"},className:"close",onClick:this.props.cancel}),e,this.props.detail.length>4&&s.a.createElement("div",{className:"toggle"},s.a.createElement(u.f,{type:"left",style:{fontSize:24,color:"#08c"},onClick:this.next.bind(this,!0)}),s.a.createElement(u.f,{type:"right",style:{fontSize:24,color:"#08c"},onClick:this.next.bind(this,!1)})))))}}]),t}(o.Component),f=function(e){function t(e){i(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.init=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!e.currPage&&(e.currPage=a.state.currPage),e.pageSize=a.state.pageSize;var t=0==a.state.navIndex?"getInstallRecord":"getRepairRecord";window.$Funs.$AJAX(t,"get",e,function(e){var t=e.data.map(function(e,t){return e.key=t,e.pictureTime=window.$Funs.formatDate(e.pictureTime),e});a.setState({data:t,total:e.count,loading:!1})})},a.getSearch=function(e){e&&a.setState({keyWord:e,currPage:1,loading:!0},function(){a.init(e)})},a.pageChange=function(e){a.setState({currPage:e,loading:!0},function(){var e=a.state.keyWord;a.init(e)})},a.showPic=function(e){e=e.map(function(e,t){return e.key=t,e.pictureTime=window.$Funs.formatDate(e.pictureTime),e}),a.setState({picDetail:!0,detail:e},function(){})},a.cancel=function(){a.setState({picDetail:!1})},a.navChange=function(e){a.setState({navIndex:e,currPage:1,keyWord:{}},function(){a.init()})},a.state={loading:!0,navIndex:0,currPage:1,pageSize:13,keyWord:{},data:[],total:"",detail:{},picDetail:!1},a}return c(t,e),d(t,[{key:"componentWillMount",value:function(){this.init()}},{key:"render",value:function(){var e,t=this,a=[{title:"\u8f66\u724c\u53f7\u7801",width:100,dataIndex:"vehicleId",key:"vehicleId",align:"center"},{title:"\u5b89\u88c5\u65e5\u671f",width:100,dataIndex:"pictureTime",key:"pictureTime",align:"center"},{title:"\u516c\u53f8\u8f66\u961f",dataIndex:"teamName",key:"teamName",width:150,align:"center"},{title:"\u8f66\u8f86\u7c7b\u578b",dataIndex:"typeName",key:"typeName",width:150,align:"center"},(e={title:"\u7ef4\u4fee\u7167\u7247",dataIndex:"",key:"action",width:100,align:"center",render:function(e){if(e.repairInstallPictureList&&0!=e.repairInstallPictureList.length)return s.a.createElement("a",{onClick:function(){t.showPic(e.repairInstallPictureList)}},"\u67e5\u770b")}},n(e,"width",150),n(e,"align","center"),e),{title:"\u5de5\u4f5c\u4eba\u5458",dataIndex:"name",key:"name",width:150,align:"center"}];return s.a.createElement("div",{className:"recode"},s.a.createElement(u.l,{spinning:this.state.loading,size:"large"},s.a.createElement(l,{navIndex:this.state.navIndex,navChange:this.navChange}),s.a.createElement("div",null,s.a.createElement(h,{init:this.init,getSearch:this.getSearch}),s.a.createElement(u.m,{columns:a,dataSource:this.state.data,pagination:{defaultPageSize:13,total:this.state.total,onChange:this.pageChange,current:this.state.currPage}}),this.state.picDetail&&s.a.createElement(g,{detail:this.state.detail,cancel:this.cancel}))))}}]),t}(o.Component);t.default=f}});
//# sourceMappingURL=17.7b615a95.chunk.js.map