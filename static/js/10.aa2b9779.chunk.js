webpackJsonp([10],{1013:function(e,a,t){"use strict";function n(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function l(e,a){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?e:a}function r(e,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)}function c(e,a){var t=new FileReader;t.addEventListener("load",function(){return a(t.result)}),t.readAsDataURL(e)}function s(e){var a="image/jpeg"===e.type;a||m.o.error("\u56fe\u7247\u683c\u5f0f\u9519\u8bef");var t=e.size/1024/1024<2;return t||m.o.error("Image must smaller than 2MB!"),a&&t}var i=t(0),o=t.n(i),m=t(347),u=function(){function e(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(a,t,n){return t&&e(a.prototype,t),n&&e(a,n),a}}(),d=function(e){function a(){var e,t,r,s;n(this,a);for(var i=arguments.length,o=Array(i),m=0;m<i;m++)o[m]=arguments[m];return t=r=l(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(o))),r.state={loading:!1},r.handleChange=function(e){if(console.log(e),"uploading"===e.file.status)return void r.setState({loading:!0});if("done"===e.file.status){c(e.file.originFileObj,function(e){return r.setState({imageUrl:e,loading:!1})});var a={type:r.props.type,photoCode:e.file.response};r.props.getPic(a)}},s=t,l(r,s)}return r(a,e),u(a,[{key:"render",value:function(){var e=o.a.createElement("div",null,o.a.createElement(m.f,{type:this.state.loading?"loading":"plus"}),o.a.createElement("div",{className:"ant-upload-text"},"Upload")),a=this.state.imageUrl;return o.a.createElement(m.n,{name:"multipartFile",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:window.$Funs.Basse_Port+"file",beforeUpload:s,onChange:this.handleChange},a?o.a.createElement("img",{src:a,alt:""}):e)}}]),a}(o.a.Component);a.a=d},977:function(e,a,t){"use strict";function n(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function l(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function r(e,a){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?e:a}function c(e,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)}function s(e){var a=[{title:"\u5b89\u88c5\u65e5\u671f",width:100,dataIndex:"leaveFactoryDate",key:"leaveFactoryDate",align:"center"},{title:"\u516c\u53f8\u8f66\u961f",width:200,dataIndex:"teamName",key:"teamName",align:"center"},{title:"\u8f66\u8f86\u7c7b\u578b",dataIndex:"typeName",key:"typeName",width:150,align:"center"},{title:"\u7ec8\u7aef\u8bf4\u660e",dataIndex:"deviceName",key:"deviceName",width:150,align:"center"},{title:"\u8f66\u724c\u53f7",dataIndex:"vehicleId",key:"vehicleId",width:150,align:"center"},{title:"SIM\u5361\u7c7b\u578b",dataIndex:"simTypeName",key:"simTypeName",width:150,align:"center"},{title:"SIM\u5361\u53f7",dataIndex:"sim",key:"sim",width:150,align:"center"},{title:"\u7ec8\u7aef\u53f7",dataIndex:"manageNum",key:"manageNum",width:150,align:"center"},{title:"\u64cd\u4f5c",dataIndex:"",width:150,key:"action",render:function(a){return o.a.createElement(u.b,{type:"primary",onClick:function(){e.addCarInfo(a)}},"\u8865\u5168")}}];return o.a.createElement("div",null,o.a.createElement("div",{className:"clean top"},o.a.createElement(f,{className:"search",placeholder:"\u8bf7\u8f93\u5165\u8f66\u724c\u53f7\u6216\u8f66\u961f\u540d\u5b57",onSearch:function(a){return e.searchCar(a)},enterButton:!0}),o.a.createElement(u.b,{className:"fr",onClick:function(){e.searchCar("")}},"\u5168\u90e8")),o.a.createElement(u.m,{columns:a,expandedRowRender:function(e){return o.a.createElement("p",{style:{margin:0}},"\u5907\u6ce8\uff1a",e.comment)},dataSource:e.carArr,pagination:{defaultPageSize:10,total:e.total,onChange:e.pageChange}}))}Object.defineProperty(a,"__esModule",{value:!0});var i=t(0),o=t.n(i),m=t(1013),u=(t(348),t(347)),d=function(){function e(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(a,t,n){return t&&e(a.prototype,t),n&&e(a,n),a}}(),p=u.e.Item,f=u.g.Search,h=u.k.Option,g=u.i.confirm,b=function(e){function a(e){l(this,a);var t=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.handleSubmit=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){e||g({title:"\u63d0\u793a",content:"\u786e\u8ba4\u63d0\u4ea4\u8865\u5168\u4fe1\u606f\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a.carId=t.props.item.id,a.photoCodes=t.state.photoCodes,a.callDate&&(a.callDate=new Date(a.callDate._d).getTime()),window.$Funs.$AJAX("car/newCar","post",a,function(e){u.o.success("\u64cd\u4f5c\u6210\u529f"),t.props.cancel()})},onCancel:function(){}})})},t.getPic=function(e){var a=t.state.photoCodes;e&&a.push(e),t.setState({photoCodes:a},function(){console.log(t.state.photoCodes)})},t.state={photoCodes:[],product:[],zdType:[]},t}return c(a,e),d(a,[{key:"componentWillMount",value:function(){var e=this;window.$Funs.$AJAX("ziDian","get",{type:1},function(a){window.$Funs.$AJAX("ziDian","get",{type:3},function(t){e.setState({zdType:t,product:a})})})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,a={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};return o.a.createElement("div",{className:"addNew"},o.a.createElement(u.a,null,o.a.createElement(u.a.Item,null,o.a.createElement("a",{onClick:this.props.cancel},"\u8f66\u8f86\u5f55\u5165")),o.a.createElement(u.a.Item,null,"\u8865\u5168\u8f66\u8f86\u4fe1\u606f")),o.a.createElement("div",null,o.a.createElement("h2",null,"\u8865\u5168\u8f66\u8f86\u8bc1\u660e\u4fe1\u606f"),o.a.createElement("div",{className:"addForm"},o.a.createElement(u.e,{layout:"inline",onSubmit:this.handleSubmit,className:"clean"},o.a.createElement("div",{className:"row clean"},o.a.createElement(p,{label:"\u8f66\u724c\u53f7",className:"formItem clean"},o.a.createElement(u.g,{value:this.props.item.vehicleId,disabled:!0,className:"disabled"})),o.a.createElement(p,{label:"\u516c\u53f8\u8f66\u961f",className:"formItem clean"},o.a.createElement(u.g,{value:this.props.item.teamName,disabled:!0,className:"disabled"})),o.a.createElement(p,Object.assign({className:"formItem clean"},a,{label:"\u8f66\u724c\u989c\u8272"}),e("carColor",{initialValue:"\u9ec4\u8272"})(o.a.createElement(u.k,{style:{width:120},onChange:this.handleSelect},o.a.createElement(h,{value:"\u9ec4\u8272"},"\u9ec4\u8272"),o.a.createElement(h,{value:"\u84dd\u8272"},"\u84dd\u8272"),o.a.createElement(h,{value:"\u9ed1\u8272"},"\u9ed1\u8272"),o.a.createElement(h,{value:"\u767d\u8272"},"\u767d\u8272")))),o.a.createElement(p,{label:"\u8f66\u8f86\u7c7b\u578b",className:"formItem clean"},o.a.createElement(u.g,{value:this.props.item.typeName,disabled:!0,className:"disabled"}))),o.a.createElement("div",{className:"row clean"},o.a.createElement(p,Object.assign({className:"formItem clean"},a,{hasFeedback:!0,label:"\u8054\u7cfb\u7535\u8bdd"}),e("phone",{rules:[n({required:!0,message:"\u8bf7\u8f93\u5165\u8054\u7cfb\u7535\u8bdd",pattern:new RegExp(/^1[3|5|7|8|]\d{9}$/)},"message","\u624b\u673a\u683c\u5f0f\u4e0d\u6b63\u786e")]})(o.a.createElement(u.g,null))),o.a.createElement(p,Object.assign({className:"formItem clean"},a,{hasFeedback:!0,label:"\u6240\u5c5e\u5730\u533a"}),e("address",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6240\u5c5e\u5730\u533a"}]})(o.a.createElement(u.g,null))),o.a.createElement(p,{label:"\u5b89\u88c5\u65f6\u95f4",className:"formItem clean"},o.a.createElement("span",{className:"tag"},"\u6b64\u4e3a\u51fa\u5382\u5b89\u88c5"),o.a.createElement(u.g,{value:this.props.item.leaveFactoryDate,disabled:!0,className:"disabled"})),o.a.createElement(p,Object.assign({className:"formItem clean"},a,{label:"\u5bfc\u822a\u7c7b\u578b"}),e("navigationType",{initialValue:"\u5317\u6597/GPS\u53cc\u6a21"})(o.a.createElement(u.k,{style:{width:120},onChange:this.handleSelect},o.a.createElement(h,{value:"\u5317\u6597/GPS\u53cc\u6a21"},"\u5317\u6597/GPS\u53cc\u6a21"),o.a.createElement(h,{value:"GPS"},"GPS"))))),o.a.createElement("div",{className:"row clean"},o.a.createElement(p,{className:"formItem clean",label:"\u7ec8\u7aef\u8bf4\u660e"},o.a.createElement(u.g,{value:this.props.item.deviceName,disabled:!0,className:"disabled"})),o.a.createElement(p,{className:"formItem clean",label:"SIM\u5361\u53f7"},o.a.createElement(u.g,{value:this.props.item.sim,disabled:!0,className:"disabled"})),this.state.product.length>0&&o.a.createElement(p,Object.assign({className:"formItem clean"},a,{label:"\u751f\u4ea7\u5382\u5bb6"}),e("manufacturer",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u751f\u4ea7\u5382\u5bb6"}],initialValue:this.state.product[0]})(o.a.createElement(u.k,{style:{width:120},onChange:this.handleSelect},this.state.product.map(function(e,a){return o.a.createElement(h,{value:e,key:a},e)})))),o.a.createElement(p,Object.assign({className:"formItem clean"},a,{hasFeedback:!0,label:"\u7ec8\u7aef\u7c7b\u578b\u53f7"}),e("terminalTypeNum",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7ec8\u7aef\u7c7b\u578b\u53f7"}]})(o.a.createElement(u.g,null)))),o.a.createElement("div",{className:"row clean"},o.a.createElement(p,Object.assign({className:"formItem clean"},a,{hasFeedback:!0,label:"\u5382\u5bb6\u7f16\u53f7"}),e("factoryNumber",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5382\u5bb6\u7f16\u53f7"}]})(o.a.createElement(u.g,null))),o.a.createElement(p,Object.assign({className:"formItem clean"},a,{label:"\u7ec8\u7aef\u7c7b\u578b"}),e("terminalType",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7ec8\u7aef\u7c7b\u578b"}],initialValue:this.state.zdType[0]})(o.a.createElement(u.k,{style:{width:120},onChange:this.handleSelect},this.state.zdType.map(function(e,a){return o.a.createElement(h,{value:e,key:a},e)})))),o.a.createElement(p,Object.assign({className:"formItem clean"},a,{hasFeedback:!0,label:"\u7ec8\u7aef\u6279\u6b21"}),e("terminalOrder",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7ec8\u7aef\u6279\u6b21"}]})(o.a.createElement(u.g,null))),o.a.createElement(p,{className:"formItem clean",label:"\u7ec8\u7aef\u53f7"},o.a.createElement(u.g,{value:this.props.item.manageNum,disabled:!0,className:"disabled"}))),o.a.createElement("div",{className:"row clean"},o.a.createElement(p,Object.assign({className:"formItem clean"},a,{label:"\u5bfc\u822a\u7c7b\u578b"}),e("systemPlatform",{initialValue:"\u9a6c\u826f\u8f66\u8f86\u76d1\u63a7\u5bfc\u822a\u7cfb\u7edf"})(o.a.createElement(u.k,{style:{width:120},onChange:this.handleSelect},o.a.createElement(h,{value:"\u9a6c\u826f\u8f66\u8f86\u76d1\u63a7\u5bfc\u822a\u7cfb\u7edf"},"\u9a6c\u826f\u8f66\u8f86\u76d1\u63a7\u5bfc\u822a\u7cfb\u7edf")))),o.a.createElement(p,Object.assign({className:"formItem clean"},a,{hasFeedback:!0,label:"\u5e73\u53f0\u7f16\u53f7"}),e("systemPlatformNumber",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5e73\u53f0\u7f16\u53f7"}]})(o.a.createElement(u.g,null))),o.a.createElement(p,Object.assign({className:"formItem clean"},a,{hasFeedback:!0,label:"\u5e73\u53f0\u6279\u6b21"}),o.a.createElement("span",{className:"tag"},"\u8d44\u6599\u9f50\u5168"),e("systemPlatformOrder",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5e73\u53f0\u6279\u6b21"}]})(o.a.createElement(u.g,null)))),o.a.createElement("div",{className:"row clean"},o.a.createElement(p,{label:"\u8f66\u8f86\u767b\u8bb0\u8bc1\u4e66",className:"formItem clean"},o.a.createElement(m.a,{type:"0",getPic:this.getPic})),o.a.createElement(p,{label:"\u884c\u9a76\u8bc1",className:"formItem clean"},o.a.createElement(m.a,{type:"1",getPic:this.getPic})),o.a.createElement(p,{label:"\u8f66\u8eab\u7167\u7247",className:"formItem clean"},o.a.createElement(m.a,{type:"2",getPic:this.getPic}))),o.a.createElement("div",{className:"row clean"},o.a.createElement("p",{className:"note"},"\u5907\u6ce8\uff08\u9009\u586b\uff09"),o.a.createElement(p,Object.assign({className:"formItem clean"},a,{label:"\u6765\u7535\u4eba"}),e("callAPerson",{})(o.a.createElement(u.g,null))),o.a.createElement(p,Object.assign({className:"formItem clean"},a,{label:"\u6765\u7535\u65f6\u95f4"}),e("callDate",{})(o.a.createElement(u.c,null))),o.a.createElement(p,Object.assign({className:"formItem clean"},a,{label:"\u8bb0\u5f55\u4eba"}),e("recordPerson",{})(o.a.createElement(u.g,null)))),o.a.createElement("div",{className:"row clean"},o.a.createElement(p,{className:"formItem clean",label:"\u5907\u6ce8"},o.a.createElement(u.g,{value:this.props.item.comment,disabled:!0,className:"disabled comment"}))),o.a.createElement(p,{className:"btns"},o.a.createElement(u.b,{type:"primary",htmlType:"submit"},"\u786e\u8ba4\u4fee\u6539"),o.a.createElement(u.b,{onClick:this.props.cancel},"\u53d6\u6d88"))))))}}]),a}(i.Component),E=u.e.create()(b),y=function(e){function a(e){l(this,a);var t=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.addCarInfo=function(e){t.setState({addFlag:!0,item:e})},t.cancel=function(){t.setState({addFlag:!1})},t.pageChange=function(e){t.setState({currPage:e},function(){t.init()})},t.searchCar=function(e){t.setState({search:e,loading:!0},function(){t.init()})},t.init=function(){window.$Funs.$AJAX("cars","get",{currPage:t.state.currPage,pageSize:t.state.pageSize,carNumOrName:t.state.search},function(e){e.data=e.data.map(function(e,a){return e.leaveFactoryDate=e.leaveFactoryDate.split(" ")[0],e.key=a,e}),t.setState({carArr:e.data,total:e.count,loading:!1})})},t.state={addFlag:!1,currPage:1,pageSize:10,carArr:[],total:"",search:"",item:{},loading:!0},t}return c(a,e),d(a,[{key:"componentWillMount",value:function(){this.init()}},{key:"render",value:function(){return o.a.createElement("div",{className:"entry"},o.a.createElement(u.l,{spinning:this.state.loading,size:"large"},this.state.addFlag?o.a.createElement(E,{cancel:this.cancel,item:this.state.item}):o.a.createElement(s,{addCarInfo:this.addCarInfo,carArr:this.state.carArr,total:this.state.total,pageChange:this.pageChange,searchCar:this.searchCar})))}}]),a}(i.Component);a.default=y}});
//# sourceMappingURL=10.aa2b9779.chunk.js.map