webpackJsonp([18],{991:function(e,a,t){"use strict";function n(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function l(e,a){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?e:a}function r(e,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)}function i(e){return c.a.createElement("div",{className:"nav clean"},c.a.createElement("span",{className:0==e.navIndex?"active":"",onClick:e.navChange.bind(this,0)},"\u5b89\u88c5\u901a\u77e5"),c.a.createElement("span",{className:1==e.navIndex?"active":"",onClick:e.navChange.bind(this,1)},"\u7ef4\u4fee\u901a\u77e5"))}Object.defineProperty(a,"__esModule",{value:!0});var s=t(0),c=t.n(s),o=(t(348),t(347)),d=function(){function e(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(a,t,n){return t&&e(a.prototype,t),n&&e(a,n),a}}(),m=o.e.Item,u=(o.g.Search,o.k.Option),p=o.g.TextArea,h=o.i.confirm,f=function(e){function a(e){n(this,a);var t=l(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.handleSearch=function(){t.props.form.validateFields(function(e,a){for(var n=Object.keys(a),l={},r=0;r<n.length;r++)"chargeTime"==n[r]?(a[n[r]]&&(l.chargeTimeStart=new Date(a[n[r]][0]._d).getTime()),a[n[r]]&&(l.chargeTimeEnd=new Date(a[n[r]][1]._d).getTime())):"deadlineDate"==n[r]?(a[n[r]]&&(l.deadlineDateStart=new Date(a[n[r]][0]._d).getTime()),a[n[r]]&&(l.deadlineDateEnd=new Date(a[n[r]][1]._d).getTime())):a[n[r]]&&(l[n[r]]=a[n[r]]);l&&(t.props.getSearch(l),l.currPage=1,t.props.init(l))})},t.clear=function(){t.props.form.resetFields(),t.props.init({})},t}return r(a,e),d(a,[{key:"render",value:function(){var e=this.props.form,a=e.getFieldDecorator;e.resetFields;return c.a.createElement(o.e,{className:"topForm clean"},c.a.createElement("div",{className:"fl"},c.a.createElement(m,{label:"\u8f66\u724c\u53f7\u7801\uff1a",className:"formItem"},a("vehicleId")(c.a.createElement(o.g,null)))),c.a.createElement("div",{className:"fl"},c.a.createElement(m,{label:"\u516c\u53f8\u8f66\u961f\uff1a",className:"formItem"},a("teamName")(c.a.createElement(o.g,null)))),c.a.createElement("div",{className:"fl"},c.a.createElement(m,{label:"\u8f66\u8f86\u7c7b\u578b\uff1a",className:"formItem"},a("name")(c.a.createElement(o.g,null)))),c.a.createElement("div",{className:"fl"},c.a.createElement("a",{className:"empty",onClick:this.clear},"\u6e05\u7a7a")),c.a.createElement("div",{className:"fr"},c.a.createElement(o.b,{type:"primary",onClick:this.handleSearch},"\u67e5\u627e"),c.a.createElement(o.b,{type:"primary",onClick:this.props.postChoose},"\u53d1\u9001\u901a\u77e5")))}}]),a}(s.Component),g=o.e.create({mapPropsToFields:function(e){return{init:o.e.createFormField({value:e.init}),getSearch:o.e.createFormField({value:e.getSearch}),postChoose:o.e.createFormField({value:e.postChoose})}}})(f),v=function(e){function a(e){n(this,a);var t=l(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.handleSubmit=function(){t.props.form.validateFields(function(e,a){e||(a.carframeId=t.props.detail.carframeId,a.inputMan=window.$Funs.cook.get("id"),a.newCarId=t.props.detail.newCarId,a.oldVehicleId=t.props.detail.oldVehicleId,a.operationType=t.props.navIndex,a.phone=t.props.detail.phone,a.vehicleId=t.props.detail.vehicleId,a.teamName=t.props.detail.teamName,window.$Funs.$AJAX("repairInstall","post",a,function(e){o.o.success("\u64cd\u4f5c\u6210\u529f"),t.props.cancel()}))})},t.state={user:[]},t}return r(a,e),d(a,[{key:"componentWillMount",value:function(){var e=this;window.$Funs.$AJAX("user","get",{roles:2},function(a){e.setState({user:a})})}},{key:"render",value:function(){var e=this,a=this.props.form.getFieldDecorator,t={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},n=c.a.createElement("div",{className:"detail"},c.a.createElement(o.e,{layout:"inline",className:"clean"},c.a.createElement("div",{className:"clean"},c.a.createElement(m,{label:"\u8f66\u724c\u53f7",className:"formItem clean"},c.a.createElement(o.g,{value:this.props.detail.vehicleId,disabled:!0,className:"disabled"})),c.a.createElement(m,{label:"\u66fe\u4f7f\u7528\u8f66\u724c\u53f7",className:"formItem clean"},c.a.createElement(o.g,{value:this.props.detail.oldVehicleId,disabled:!0,className:"disabled"})),c.a.createElement(m,{label:"\u516c\u53f8\u6216\u8f66\u961f\u540d",className:"formItem clean"},c.a.createElement(o.g,{value:this.props.detail.teamName,disabled:!0,className:"disabled"})),c.a.createElement(m,{label:"\u8f66\u67b6\u53f7",className:"formItem clean"},c.a.createElement(o.g,{value:this.props.detail.carframeId,disabled:!0,className:"disabled"})),c.a.createElement(m,{label:"\u8054\u7cfb\u65b9\u5f0f",className:"formItem clean"},c.a.createElement(o.g,{value:this.props.detail.userName,disabled:!0,className:"disabled"})),c.a.createElement(m,{label:"\u8f66\u8f86\u7c7b\u578b",className:"formItem clean"},c.a.createElement(o.g,{value:this.props.detail.typeName,disabled:!0,className:"disabled"}))),c.a.createElement("div",{className:" clean"},c.a.createElement(m,Object.assign({className:"formItem clean"},t,{label:"\u6307\u6d3e\u4eba\u5458"}),a("userId",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6307\u6d3e\u4eba\u5458"}]})(c.a.createElement(o.k,{style:{width:200}},this.state.user&&this.state.user.map(function(a,t){return c.a.createElement(u,{value:e.state.user[t].id,key:t},e.state.user[t].name)})))),c.a.createElement(m,Object.assign({className:"formItem clean location"},t,{label:"\u8f66\u8f86\u4f4d\u7f6e"}),a("carLocation",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8f66\u8f86\u4f4d\u7f6e"}]})(c.a.createElement(o.g,null)))),c.a.createElement("div",{className:"clean"},c.a.createElement(m,Object.assign({className:"formItem clean"},t,{label:"\u5b89\u88c5\u7c7b\u578b"}),a("repairInstallType",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5b89\u88c5\u7c7b\u578b"}],initialValue:"0"})(c.a.createElement(o.k,{style:{width:200}},c.a.createElement(u,{value:"0"},"\u76d1\u63a7"),c.a.createElement(u,{value:"1"},"GPS"))))),c.a.createElement(m,{label:"\u5907\u6ce8\uff1a",className:"formItem fl clean"},a("repairInstallRemark",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5907\u6ce8"}]})(c.a.createElement(p,{rows:2})))),c.a.createElement("div",{className:"diaBtns fr"},c.a.createElement(o.b,{type:"primary",onClick:this.handleSubmit},"\u786e\u8ba4"),c.a.createElement(o.b,{onClick:this.props.cancel},"\u53d6\u6d88")));return c.a.createElement("div",{className:"dialog"},c.a.createElement("div",{className:"mask"}),c.a.createElement("div",{className:"main"},c.a.createElement("p",{className:"title"},0==this.props.navIndex?"\u6dfb\u52a0\u5b89\u88c5\u8f66\u8f86":"\u6dfb\u52a0\u7ef4\u4fee\u8f66\u8f86"),n))}}]),a}(s.Component),E=o.e.create({mapPropsToFields:function(e){return{detail:o.e.createFormField({value:e.detail}),cancel:o.e.createFormField({value:e.cancel})}}})(v),I=function(e){function a(e){n(this,a);var t=l(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.init=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.setState({loading:!0},function(){!e.currPage&&(e.currPage=t.state.currPage),e.pageSize=t.state.pageSize;var a=0==t.state.navIndex?"getInstallNoticeList":"getRepairNoticeList";window.$Funs.$AJAX(a,"get",e,function(e){var a=e.data.map(function(e,a){return e.key=a,e.deadlineDate=window.$Funs.formatDate(e.deadlineDate),0==e.repairInstallType?e.repairInstallType="\u76d1\u63a7":e.repairInstallType="GPS",e});t.setState({data:a,total:e.count,loading:!1})})})},t.getSearch=function(e){e&&t.setState({keyWord:e,currPage:1,loading:!0},function(){t.init(e)})},t.pageChange=function(e){t.setState({currPage:e},function(){var e=t.state.keyWord;t.init(e)})},t.showDetail=function(e){t.setState({addEntry:!0,detail:e})},t.cancel=function(){t.setState({addEntry:!1})},t.navChange=function(e){t.setState({navIndex:e,currPage:1},function(){t.init({})})},t.postChoose=function(){var e=t.state.choose;0==e.length?o.o.error("\u8bf7\u9009\u62e9\u9700\u8981\u53d1\u9001\u901a\u77e5\u7684\u8f66\u8f86"):h({title:"\u63d0\u793a",content:"\u786e\u8ba4\u63d0\u4ea4\u901a\u77e5\u4fe1\u606f\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){window.$Funs.$AJAX("repairInstallSendNotice","post",{repairInstallIdList:e},function(e){o.o.success("\u64cd\u4f5c\u6210\u529f"),t.init()})},onCancel:function(){}})},t.state={loading:!0,navIndex:0,currPage:1,pageSize:13,keyWord:{},data:[],total:"",detail:{},addEntry:!1,choose:[]},t}return r(a,e),d(a,[{key:"componentWillMount",value:function(){this.init({})}},{key:"render",value:function(){var e=this,a=[{title:"\u516c\u53f8\u8f66\u961f",width:150,dataIndex:"teamName",key:"teamName",align:"center"},{title:"\u8f66\u724c\u53f7",width:100,dataIndex:"vehicleId",key:"vehicleId",align:"center"},{title:"\u8f66\u67b6\u53f7",dataIndex:"carframeId",key:"carframeId",width:150,align:"center"},{title:"\u66fe\u4f7f\u7528\u8f66\u724c\u53f7",dataIndex:"oldVehicleId",key:"oldVehicleId",width:110,align:"center"},{title:"\u6709\u6548\u671f\u81f3",dataIndex:"deadlineDate",key:"deadlineDate",width:100,align:"center"},{title:"\u8054\u7cfb\u65b9\u5f0f",dataIndex:"userName",key:"userName",width:150,align:"center"},{title:"\u8f66\u8f86\u7c7b\u578b",dataIndex:"typeName",key:"typeName",width:150,align:"center"},{title:"\u6307\u6d3e\u4eba\u5458",dataIndex:"name",key:"name",width:100,align:"center"},{title:"\u8f66\u8f86\u4f4d\u7f6e",dataIndex:"carLocation",key:"carLocation",align:"center"},{title:"\u5b89\u88c5\u7c7b\u578b",dataIndex:"repairInstallType",key:"repairInstallType",width:100,align:"center"}],t={onChange:function(a,t){var n=t.map(function(e){return e.repairInstallId});e.setState({choose:n})}};return c.a.createElement("div",{className:"addNotice"},c.a.createElement(o.l,{spinning:this.state.loading,size:"large"},c.a.createElement(i,{navIndex:this.state.navIndex,navChange:this.navChange}),c.a.createElement("div",null,c.a.createElement(g,{init:this.init,getSearch:this.getSearch,showDetail:this.showDetail,postChoose:function(){e.postChoose()}}),c.a.createElement(o.m,{rowSelection:t,expandedRowRender:function(e){return c.a.createElement("p",{style:{margin:0}},"\u5907\u6ce8\uff1a",e.repairInstallRemark)},columns:a,dataSource:this.state.data,pagination:{defaultPageSize:13,total:this.state.total,onChange:this.pageChange,current:this.state.currPage}}),this.state.addEntry&&c.a.createElement(E,{detail:this.state.detail,cancel:this.cancel,navIndex:this.state.navIndex}))))}}]),a}(s.Component);a.default=I}});
//# sourceMappingURL=18.38e2280a.chunk.js.map