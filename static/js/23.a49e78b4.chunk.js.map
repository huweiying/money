{"version":3,"sources":["../../static/js/23.a49e78b4.chunk.js","pages/charge/group.jsx"],"names":["webpackJsonp","985","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","n","__WEBPACK_IMPORTED_MODULE_2_antd__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","confirm","Group","_Component","this","_this","getPrototypeOf","pageChange","page","data","state","splice","pageSize","setState","showData","group","error","title","content","okText","cancelText","onOk","loading","window","$Funs","$AJAX","res","success","onCancel","currPage","keyWord","total","_this2","name","action","Basse_Port","headers","authorization","onChange","info","file","status","response","map","v","deadlineDate","formatDate","console","log","message","columns","dataIndex","width","align","rowSelection","selectedRowKeys","selectedRows","Date","getTime","a","createElement","className","spinning","size","assign","type","onClick","expandedRowRender","record","style","margin","remark","dataSource","pagination","defaultPageSize","current"],"mappings":"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","file":"../static/js/23.a49e78b4.chunk.js","sourcesContent":["webpackJsonp([23],{\n\n/***/ 985:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_router_dom__ = __webpack_require__(348);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd__ = __webpack_require__(347);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var confirm=__WEBPACK_IMPORTED_MODULE_2_antd__[\"i\" /* Modal */].confirm;var Group=function(_Component){_inherits(Group,_Component);function Group(props){_classCallCheck(this,Group);var _this=_possibleConstructorReturn(this,(Group.__proto__||Object.getPrototypeOf(Group)).call(this,props));_this.pageChange=function(page){var data=_this.state.data;data.splice((page-1)*_this.state.pageSize,page*_this.state.pageSize-1);_this.setState({showData:data});};_this.confirm=function(group){//车辆收费\nif(group==[]){__WEBPACK_IMPORTED_MODULE_2_antd__[\"o\" /* message */].error('请选择收费车辆');return;}confirm({title:'提示',content:'确认提交补全信息？',okText:'确认',cancelText:'取消',onOk:function onOk(){_this.setState({loading:true},function(){window.$Funs.$AJAX('groupCharge','post',group,function(res){__WEBPACK_IMPORTED_MODULE_2_antd__[\"o\" /* message */].success('收费成功');_this.setState({loading:false});});});},onCancel:function onCancel(){}});};_this.state={loading:false,currPage:1,pageSize:13,keyWord:{},//搜索关键字\ndata:[],//table数据\nshowData:[],//分页显示的数据\ntotal:''//总页数 \n};return _this;}_createClass(Group,[{key:'render',value:function render(){var _this2=this;var group=[];var props={name:'file',action:window.$Funs.Basse_Port+'groupChargeUpload',headers:{authorization:'authorization-text'},onChange:function onChange(info){if(info.file.status!=='uploading'){}if(info.file.status==='done'){__WEBPACK_IMPORTED_MODULE_2_antd__[\"o\" /* message */].success(info.file.name+' \\u4E0A\\u4F20\\u6210\\u529F');var data=info.file.response.data;data=data.map(function(v,i){v.deadlineDate=window.$Funs.formatDate(v.deadlineDate);v.key=i;return v;});_this2.setState({data:data,total:info.file.response.total});data=data.splice(0,_this2.state.pageSize-1);_this2.setState({showData:data});}else if(info.file.status==='error'){console.log(info.file.response.message);__WEBPACK_IMPORTED_MODULE_2_antd__[\"o\" /* message */].error(info.file.response.message);}}};var columns=[{title:'公司车队',dataIndex:'teamName',key:'teamName',width:150,align:'center'},{title:'车牌号码',width:100,dataIndex:'vehicleId',key:'vehicleId',align:'center'},{title:'付款金额',width:100,dataIndex:'moneyAmont',key:'moneyAmont',align:'center'},{title:'付款方式',dataIndex:'payType',key:'payType',width:100,align:'center'},{title:'有效期至',dataIndex:'deadlineDate',key:'deadlineDate',width:100,align:'center'},{title:'发票（或收据）号码',dataIndex:'invoiceNum',key:'invoiceNum',width:150,align:'center'},{title:'收款人',dataIndex:'inputManName',key:'inputManName',width:100,align:'center'}];var rowSelection={onChange:function onChange(selectedRowKeys,selectedRows){var data=selectedRows.map(function(v,i){v.deadlineDate=new Date(v.deadlineDate).getTime();delete v.key;return v;});group=data;}};return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'group'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_antd__[\"l\" /* Spin */],{spinning:this.state.loading,size:'large'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'clean'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_antd__[\"n\" /* Upload */],Object.assign({},props,{className:'fl'}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_antd__[\"b\" /* Button */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_antd__[\"f\" /* Icon */],{type:'upload'}),'\\u4E0A\\u4F20\\u6587\\u4EF6')),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_antd__[\"b\" /* Button */],{type:'primary',className:'fr',onClick:function onClick(){_this2.confirm(group);}},'\\u786E\\u8BA4\\u6536\\u8D39')),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_antd__[\"m\" /* Table */],{rowSelection:rowSelection,expandedRowRender:function expandedRowRender(record){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('p',{style:{margin:0}},'\\u5907\\u6CE8\\uFF1A',record.remark);},columns:columns,dataSource:this.state.showData,pagination:{defaultPageSize:13,total:this.state.data.length,onChange:this.pageChange,current:this.state.currPage}})));}}]);return Group;}(__WEBPACK_IMPORTED_MODULE_0_react__[\"Component\"]);/* harmony default export */ __webpack_exports__[\"default\"] = (Group);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// ../static/js/23.a49e78b4.chunk.js","import React, { Component } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { Table , Input , Button , Upload, message,Icon ,Spin,Modal} from 'antd';\r\nconst confirm = Modal.confirm;\r\n\r\nexport default class Group extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading:false,\r\n      currPage:1,\r\n      pageSize:13,\r\n      keyWord:{},//搜索关键字\r\n      data:[],//table数据\r\n      showData:[],//分页显示的数据\r\n      total:'',//总页数 \r\n    }\r\n    \r\n  }\r\n  pageChange=(page)=>{\r\n    let data = this.state.data;\r\n    data.splice((page-1) * this.state.pageSize , page * this.state.pageSize -1);\r\n    this.setState({\r\n      showData:data\r\n    })\r\n  }\r\n  confirm = (group)=>{//车辆收费\r\n    if(group == []){\r\n      message.error('请选择收费车辆');\r\n      return\r\n    }\r\n    confirm({\r\n      title: '提示',\r\n      content: '确认提交补全信息？',\r\n      okText:'确认',\r\n      cancelText:'取消',\r\n      onOk:()=> {\r\n        this.setState({\r\n          loading:true\r\n        },()=>{\r\n          window.$Funs.$AJAX('groupCharge','post',group,(res)=>{\r\n            message.success('收费成功');\r\n            this.setState({\r\n              loading:false\r\n            })\r\n          })\r\n        })\r\n      },\r\n      onCancel() {\r\n      },\r\n    });\r\n    \r\n  }\r\n\r\n  render() {\r\n    let group = [];\r\n    const props = {\r\n      name: 'file',\r\n      action: window.$Funs.Basse_Port + 'groupChargeUpload',\r\n      headers: {\r\n        authorization: 'authorization-text',\r\n      },\r\n      onChange:(info)=> {\r\n        if (info.file.status !== 'uploading') {\r\n        }\r\n        if (info.file.status === 'done') {\r\n          message.success(`${info.file.name} 上传成功`);\r\n          let data = info.file.response.data;\r\n          data = data.map((v,i)=>{\r\n            v.deadlineDate = window.$Funs.formatDate(v.deadlineDate);\r\n            v.key = i;\r\n            return v\r\n          }) \r\n          this.setState({\r\n            data:data,\r\n            total:info.file.response.total\r\n          })\r\n          data = data.splice( 0 , this.state.pageSize -1);\r\n          this.setState({\r\n            showData:data\r\n          })\r\n        } else if (info.file.status === 'error') {\r\n          console.log(info.file.response.message)\r\n          message.error(info.file.response.message);\r\n        }\r\n      },\r\n    };\r\n    const columns = [\r\n      { title: '公司车队', dataIndex: 'teamName',key:'teamName', width: 150 ,align: 'center' },\r\n      { title: '车牌号码', width: 100, dataIndex: 'vehicleId',key:'vehicleId',align: 'center' },\r\n      { title: '付款金额', width: 100, dataIndex: 'moneyAmont',key:'moneyAmont' ,align: 'center' },\r\n      { title: '付款方式', dataIndex: 'payType', key:'payType',  width: 100 ,align: 'center' },\r\n      { title: '有效期至', dataIndex: 'deadlineDate',key:'deadlineDate', width: 100 ,align: 'center' },\r\n      { title: '发票（或收据）号码', dataIndex: 'invoiceNum',key:'invoiceNum', width: 150 ,align: 'center' },\r\n      { title: '收款人', dataIndex: 'inputManName',key:'inputManName', width: 100 ,align: 'center' },\r\n    ];\r\n    const rowSelection = {\r\n      onChange: (selectedRowKeys, selectedRows) => {\r\n        let data = selectedRows.map((v,i)=>{\r\n          v.deadlineDate = new Date(v.deadlineDate).getTime();\r\n          delete v.key;\r\n          return v\r\n        })\r\n        group = data;\r\n      },\r\n    };\r\n    return (\r\n      <div className='group'>\r\n      <Spin spinning = {this.state.loading} size = 'large'>\r\n        <div className='clean'>\r\n          <Upload {...props} className = 'fl'>\r\n            <Button>\r\n              <Icon type=\"upload\" />上传文件\r\n            </Button>\r\n          </Upload>\r\n          <Button type=\"primary\" className='fr' onClick={()=>{this.confirm(group)}}>确认收费</Button>\r\n        </div>\r\n        <Table rowSelection={rowSelection} expandedRowRender={record => <p style={{ margin: 0 }}>备注：{record.remark}</p>} columns={columns} dataSource={this.state.showData}  pagination = {{ defaultPageSize:13,total:this.state.data.length,onChange:this.pageChange,current:this.state.currPage }}/>\r\n      </Spin>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/charge/group.jsx"],"sourceRoot":""}