webpackJsonp([22],{983:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),c=a.n(r),s=(a(348),a(347)),o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=s.e.Item,m=(s.g.Search,s.k.Option),u=s.g.TextArea,p=s.i.confirm,h=function(e){function t(e){n(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleSearch=function(){a.props.form.validateFields(function(e,t){for(var n=Object.keys(t),l={},i=0;i<n.length;i++)t[n[i]]&&(l[n[i]]=t[n[i]]);l&&a.props.getSearch(l)})},a.clear=function(){a.props.form.resetFields(),a.props.init({})},a}return i(t,e),o(t,[{key:"render",value:function(){var e=this.props.form,t=e.getFieldDecorator;e.resetFields;return c.a.createElement(s.e,{className:"topForm clean"},c.a.createElement("div",{className:"fl"},c.a.createElement(d,{label:"\u8f66\u724c\u53f7\u7801\uff1a",className:"formItem"},t("vehicleId")(c.a.createElement(s.g,null)))),c.a.createElement("div",{className:"fl"},c.a.createElement(d,{label:"\u516c\u53f8\u8f66\u961f\uff1a",className:"formItem"},t("teamName")(c.a.createElement(s.g,null)))),c.a.createElement("div",{className:"fl"},c.a.createElement("a",{className:"empty",onClick:this.clear},"\u6e05\u7a7a")),c.a.createElement("div",{className:"fr"},c.a.createElement(s.b,{type:"primary",onClick:this.handleSearch},"\u67e5\u627e")))}}]),t}(r.Component),g=s.e.create({mapPropsToFields:function(e){return{init:s.e.createFormField({value:e.init}),getSearch:s.e.createFormField({value:e.getSearch})}}})(h),f=function(e){function t(e){n(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.initTable=function(){window.$Funs.$AJAX("getChargeByNewCarId","get",{newCarId:a.props.detail.newCarId},function(e){var t=e.data.map(function(e,t){return e.key=t,e.chargeTime=window.$Funs.formatDate(e.chargeTime),e.deadlineDate=window.$Funs.formatDate(e.deadlineDate),e});a.setState({data:t})})},a.handleNav=function(){a.setState({navIndex:0==a.state.navIndex?1:0})},a.handleSubmit=function(){a.props.form.validateFields(function(e,t){e||p({title:"\u63d0\u793a",content:"\u786e\u8ba4\u63d0\u4ea4\u6536\u8d39\u4fe1\u606f\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){t.invoiceNum=t.prefix+t.invoiceNum,delete t.prefix,t.newCarId=a.props.detail.newCarId,t.vehicleId=a.props.detail.vehicleId,t.teamName=a.props.detail.teamName,t.inputMan=window.$Funs.cook.get("id"),t.inputManName=window.$Funs.cook.get("name"),t.deadlineDate&&(t.deadlineDate=new Date(t.deadlineDate._d).getTime()),window.$Funs.$AJAX("charge","post",t,function(e){s.o.success("\u64cd\u4f5c\u6210\u529f"),a.props.cancel()})},onCancel:function(){}})})},a.state={navIndex:0,data:[]},a}return i(t,e),o(t,[{key:"componentWillMount",value:function(){this.initTable()}},{key:"render",value:function(){var e=[{title:"\u516c\u53f8\u8f66\u961f",width:250,dataIndex:"teamName",key:"teamName",align:"center"},{title:"\u8f66\u724c\u53f7\u7801",dataIndex:"vehicleId",key:"vehicleId",width:100,align:"center"},{title:"\u6536\u8d39\u65e5\u671f",dataIndex:"chargeTime",key:"chargeTime",width:100,align:"center"},{title:"\u6536\u8d39\u91d1\u989d",dataIndex:"moneyAmont",key:"moneyAmont",width:100,align:"center"},{title:"\u6709\u6548\u671f\u81f3",dataIndex:"deadlineDate",key:"deadlineDate",width:100,align:"center"},{title:"\u53d1\u7968\u53f7\u7801",dataIndex:"invoiceNum",key:"invoiceNum",width:100,align:"center"},{title:"\u652f\u4ed8\u65b9\u5f0f",dataIndex:"payType",key:"payType",width:100,align:"center"},{title:"\u6536\u6b3e\u4eba",dataIndex:"inputManName",key:"inputManName",width:100,align:"center"}],t=this.props.form.getFieldDecorator,a={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},n=t("prefix",{initialValue:"F"})(c.a.createElement(s.k,{style:{width:50}},c.a.createElement(m,{value:"F"},"F"),c.a.createElement(m,{value:"S"},"S"))),l=c.a.createElement("div",{className:"detail"},c.a.createElement(s.e,{layout:"inline",className:"clean"},c.a.createElement("div",{className:"clean"},c.a.createElement(d,{label:"\u8f66\u724c\u53f7",className:"formItem clean"},c.a.createElement(s.g,{value:this.props.detail.vehicleId,disabled:!0,className:"disabled"})),c.a.createElement(d,{label:"\u516c\u53f8\u6216\u8f66\u961f\u540d",className:"formItem clean"},c.a.createElement(s.g,{value:this.props.detail.teamName,disabled:!0,className:"disabled"})),c.a.createElement(d,Object.assign({className:"formItem clean"},a,{label:"\u6536\u8d39\u91d1\u989d"}),t("moneyAmont",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6536\u8d39\u91d1\u989d"}]})(c.a.createElement(s.g,{className:"pay"})),c.a.createElement("span",{className:"unit"},"\u5355\u4f4d\uff1a\u5143"))),c.a.createElement("div",{className:" clean"},c.a.createElement(d,Object.assign({className:"formItem clean"},a,{label:"\u652f\u4ed8\u65b9\u5f0f"}),t("payType",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6536\u8d39\u91d1\u989d"}],initialValue:"\u73b0\u91d1"})(c.a.createElement(s.k,{style:{width:200}},c.a.createElement(m,{value:"\u73b0\u91d1"},"\u73b0\u91d1"),c.a.createElement(m,{value:"\u8f6c\u5e10\u652f\u7968"},"\u8f6c\u5e10\u652f\u7968"),c.a.createElement(m,{value:"\u7f51\u94f6\u8f6c\u8d26"},"\u7f51\u94f6\u8f6c\u8d26"),c.a.createElement(m,{value:"\u652f\u4ed8\u5b9d"},"\u652f\u4ed8\u5b9d"),c.a.createElement(m,{value:"\u5fae\u4fe1"},"\u5fae\u4fe1"),c.a.createElement(m,{value:"\u5176\u4ed6"},"\u5176\u4ed6")))),c.a.createElement(d,Object.assign({className:"formItem clean"},a,{label:"\u622a\u6b62\u65f6\u95f4"}),t("deadlineDate",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u622a\u6b62\u65f6\u95f4"}]})(c.a.createElement(s.c,null)))),c.a.createElement("div",{className:"clean"},c.a.createElement(d,Object.assign({className:"formItem code clean"},a,{label:"\u53d1\u7968\uff08\u6216\u6536\u636e\uff09\u53f7\u7801"}),t("invoiceNum",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u53d1\u7968\uff08\u6216\u6536\u636e\uff09\u53f7\u7801"}]})(c.a.createElement(s.g,{addonBefore:n,style:{width:"100%"}})))),c.a.createElement(d,{label:"\u6536\u8d39\u5907\u6ce8\uff1a",className:"formItem fl clean"},t("remark",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6536\u8d39\u5907\u6ce8"}]})(c.a.createElement(u,{rows:3})))),c.a.createElement("div",{className:"diaBtns fr"},c.a.createElement(s.b,{type:"primary",onClick:this.handleSubmit},"\u7f34\u8d39\u786e\u8ba4"),c.a.createElement(s.b,{onClick:this.props.cancel},"\u53d6\u6d88"))),i=c.a.createElement("div",null,c.a.createElement(s.m,{columns:e,dataSource:this.state.data,scroll:{y:380},pagination:!1,expandedRowRender:function(e){return c.a.createElement("p",{style:{margin:0}},"\u5907\u6ce8\uff1a",e.remark)}}),c.a.createElement(s.b,{type:"primary",className:"confirm",onClick:this.props.cancel},"\u786e\u8ba4"));return c.a.createElement("div",{className:"dialog"},c.a.createElement("div",{className:"mask"}),c.a.createElement("div",{className:"main"},c.a.createElement("div",{className:"nav clean"},c.a.createElement("span",{className:0==this.state.navIndex?"active":"",onClick:this.handleNav},"\u6536\u8d39\u4fe1\u606f\u586b\u5199"),c.a.createElement("span",{className:1==this.state.navIndex?"active":"",onClick:this.handleNav},"\u6536\u8d39\u8bb0\u5f55")),0==this.state.navIndex?l:i))}}]),t}(r.Component),v=s.e.create()(f),y=function(e){function t(e){n(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.init=function(e){!e.currPage&&(e.currPage=a.state.currPage),e.pageSize=a.state.pageSize,window.$Funs.$AJAX("getChargelist","get",e,function(e){var t=e.data.map(function(e,t){return e.key=t,e.leaveFactoryInstall=0==e.leaveFactoryInstall?"\u5426":"\u662f",e.leaveFactoryDate=e.leaveFactoryDate.split(" ")[0],e.chargeTime?e.chargeTime=window.$Funs.formatDate(e.chargeTime):e.chargeTime="\u672a\u6536\u8d39",e.deadlineDate?e.deadlineDate=window.$Funs.formatDate(e.deadlineDate):e.deadlineDate="\u65e0",e});a.setState({data:t,total:e.count,loading:!1})})},a.getSearch=function(e){e&&a.setState({keyWord:e,currPage:1,loading:!0},function(){a.init(e)})},a.pageChange=function(e){a.setState({currPage:e,loading:!0},function(){var e=a.state.keyWord;a.init(e)})},a.addEntry=function(e){a.setState({showDiglog:!0,detail:e})},a.cancel=function(){a.setState({showDiglog:!1})},a.state={loading:!0,showDiglog:!1,currPage:1,pageSize:13,keyWord:{},data:[],total:"",detail:{}},a}return i(t,e),o(t,[{key:"componentWillMount",value:function(){this.init({})}},{key:"render",value:function(){var e=this,t=[{title:"\u8f66\u724c\u53f7\u7801",width:100,dataIndex:"vehicleId",key:"vehicleId",align:"center"},{title:"\u8f66\u8f86\u7c7b\u578b",width:150,dataIndex:"typeName",align:"center"},{title:"\u516c\u53f8\u8f66\u961f",dataIndex:"teamName",width:150,align:"center"},{title:"\u6536\u8d39\u65e5\u671f",dataIndex:"chargeTime",width:150,align:"center"},{title:"\u8054\u7cfb\u7535\u8bdd",dataIndex:"phone",width:120,align:"center"},{title:"\u6709\u6548\u671f\u81f3",dataIndex:"deadlineDate",width:150,align:"center"},{title:"\u5b89\u88c5\u65e5\u671f",dataIndex:"leaveFactoryDate",width:150,align:"center"},{title:"\u662f\u5426\u51fa\u5382\u5b89\u88c5",dataIndex:"leaveFactoryInstall",width:120,align:"center"},{title:"\u5382\u5bb6\u7f16\u53f7",dataIndex:"factoryNumber",width:100,align:"center"},{title:"\u751f\u4ea7\u5382\u5bb6",dataIndex:"manufacturer",width:100,align:"center"},{title:"\u64cd\u4f5c",dataIndex:"",key:"action",render:function(t){return c.a.createElement(s.b,{type:"primary",onClick:function(){e.addEntry(t)}},"\u5f55\u5165")}}];return c.a.createElement("div",{className:"save"},c.a.createElement(s.l,{spinning:this.state.loading,size:"large"},c.a.createElement(g,{init:this.init,getSearch:this.getSearch}),c.a.createElement(s.m,{columns:t,dataSource:this.state.data,scroll:{y:400},pagination:{defaultPageSize:13,total:this.state.total,onChange:this.pageChange,current:this.state.currPage}}),this.state.showDiglog&&c.a.createElement(v,{detail:this.state.detail,cancel:this.cancel})))}}]),t}(r.Component);t.default=y}});
//# sourceMappingURL=22.c09695c1.chunk.js.map